{{ block "root" . }}

<!doctype html>
<html lang="en">

<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<meta name="color-scheme" content="light dark">

	<!-- Pico css -->
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@picocss/pico@2.0.6/css/pico.min.css" />

	<!-- htmx -->
	<script src="https://unpkg.com/htmx.org@2.0.4"
		integrity="sha384-HGfztofotfshcF7+8n44JQL2oJmowVChPTg48S+jvZoztPfvwD79OC/LTtG6dMp+"
		crossorigin="anonymous"></script>

	<link rel="stylesheet" href="/public/styles/index.css" />
	<script src="/public/js/theme_switcher.js" defer></script>
	<script src="/public/js/search_box_dropdown.js" defer></script>

	<title>Hello world!</title>
</head>

<body>
	<!-- Header -->
	<header class="container">
		<hgroup>
			<h1>Pico</h1>
			<p>A pure HTML example, without dependencies.</p>
		</hgroup>
		<nav>
			<ul>
				<li>
					<details class="dropdown">
						<summary role="button" class="secondary">Theme</summary>
						<ul>
							<li><a href="#" data-theme-switcher="auto">Auto</a></li>
							<li><a href="#" data-theme-switcher="light">Light</a></li>
							<li><a href="#" data-theme-switcher="dark">Dark</a></li>
						</ul>
					</details>
				</li>
			</ul>
		</nav>
	</header>
	<!-- ./ Header -->

	<main class="container">

		<!-- TODO: Add htmx indicators -->
		<form role="search" id="ticker-search-box-form" hx-post="/sharedata" hx-target="#share-table-body"
			hx-swap="beforeend">

			<div class="dropdown-container">
				<!-- Input field -->
				<input name="ticker" type="search" id="ticker-search-box" placeholder="VAS, VGS, DHHF..."
					autocomplete="off" hx-post="/searchtickers" hx-target="#ticker-search-dropdown-list"
					hx-swap="innerHTML" hx-trigger="input changed delay:300ms" />

				<!-- Dropdown auto complete -->
				<div id="ticker-search-dropdown-list" class="dropdown-list" style="display: none;"></div>

			</div>

			<!-- Submit button -->
			<input type="submit" value="Search" />
		</form>

		<!-- Tables -->
		<section id="tables">
			<div class="overflow-auto">
				<table class="striped">
					<thead id="share-table-head">
						<tr>
							<th scope="col">#</th>
							<th scope="col">Heading1</th>
							<th scope="col">Heading2</th>
							<th scope="col">Heading3</th>
							<th scope="col">Heading4</th>
							<th scope="col">Heading5</th>
							<th scope="col">Heading6</th>
							<th scope="col">Heading7</th>
						</tr>
					</thead>
					<tbody id="share-table-body">
						{{ range $i, $e := .GetTrackedRowsData }}
						{{ template "shareTableRow" (dict "Index" (add1 $i) "Data" $e) }}
						{{ end }}
					</tbody>
				</table>
			</div>
		</section>
		<!-- ./ Tables -->
	</main>

</body>

</html>

{{ end }}

{{ block "shareTableRow" . }}
<tr>
	<th scope="row">{{ .Index }}</th>
	<td>{{ .Data.DisplaySymbol }}</td>
	<td>{{ .Data.DisplayAsk }}</td>
	<td>{{ .Data.DisplayPe }}</td>
	<td>{{ .Data.DisplayMarketCap }}</td>
	<td>{{ .Data.DisplayVolume }}</td>
</tr>
{{ end }}

{{ block "autoCompleteDropdown" . }}
<!-- Dropdown auto complete -->
{{ range $index, $item := . }}
<div data-index="{{ $index }}"><span>{{ $item.Name }}</span> <sub>({{ $item.Description }})</sub></div>
{{ end }}
{{ end }}
